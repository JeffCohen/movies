<h1>Movie Database</h1>

<p>
  <%= link_to "Movies", "/movies" %> | <%= link_to "Actors", "/actors" %> |
  <%= link_to "Directors", "/directors" %>
</p>


<% all_movies = Movie.read %>

<hr>

<h2>Movie Titles</h2>

<ul>

  <% all_movies.each do |movie| %>

    <% director = Director.find_by("id" => movie["director_id"]) %>

    <li>
      <strong>
        <a href="/movies/show?id=<%= movie.id %>"><%= movie["title"] %></a>
      </strong>
      (<%= movie["year"] %>)

      <% if director.present? %>
        , directed by <%= director["name"] %>.
      <% end %>

    </li>

  <% end %>

</ul>

<% all_movies.each do |movie| %>
  <%= link_to image_tag(movie["poster_url"], "width" => "120"), "/movies/show?id=#{movie["id"]}" %>
  <%=  %>
<% end %>

<h2>Quick Stats</h2>

<ul>
  <li>We have <%= Movie.count %> movies and <%= Director.count %> directors in our database.</li>

  <% the_director = Director.first %>
  <li><%= the_director["name"] %> directed <%= Movie.where(:director_id => the_director["id"]).count %> of them.</li>

  <li><%= Movie.where("year" => 2012).count %> movies were released in 2012.</li>

  <li>The latest movie is <em><%= Movie.read.order("year desc").first["title"] %></em>.</li>
  <li>The oldest movie is <em><%= Movie.read.order("year asc").first["title"] %></em>.</li>
</ul>

<hr>

<a href="http://www.imdb.com">Click here to go to imdb.com</a>.









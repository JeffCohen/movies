<h1>Movie Database</h1>

<% all_movies = Movie.read %>

<hr>

<h2>Movie Titles</h2>

<ul>

  <% all_movies.each do |movie| %>

    <% d = Director.read(movie["director_id"]) %>

    <li><strong><%= movie["title"] %></strong> (<%= movie["year"] %>), directed by <%= d["name"] %>.</li>

  <% end %>

</ul>

<% all_movies.each do |movie| %>
  <img src="<%= movie["poster_url"] %>" width="120">
<% end %>

<h2>Quick Stats</h2>

<ul>
  <li>We have <%= Movie.count %> movies and <%= Director.count %> directors in our database.</li>
  <% the_director = Director.find_by("name" => "Ron Howard") %>
  <li><%= the_director["name"] %> directed <%= Movie.where(:director_id => the_director["id"]).count %> of them.</li>
  <li><%= Movie.where("year" => 2012).count %> movies were released in 2012.</li>

  <li>The latest movie is <em><%= Movie.read.order("year desc").first["title"] %></em>.</li>
  <li>The oldest movie is <em><%= Movie.read.order("year asc").first["title"] %></em>.</li>
</ul>

<hr>

<a href="http://www.imdb.com">Click here to go to imdb.com</a>.

